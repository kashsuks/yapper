{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Yapper Slack Bot Documentation Table of Contents Requirements Environment Variables First Time Setup File Overview Commands & Behaviors Configuration Examples Running & Deployment Troubleshooting Requirements The requirements for the Yapper bot are pretty simple: Latest node.js version npm package manager Slack Account, Workspace, and permissions to create bots Git or GitHub Desktop Environment Variables Since the bot depends on multiple APIs, there are quite a few environment variables to configure. Create a .env file in your project root: # Slack SLACK_BOT_TOKEN=xoxb... SLACK_APP_TOKEN=xapp... SLACK_USER_ID=... SLACK_CHANNEL_IDS=...,... # Last.fm LASTFM_USER=... LASTFM_API_KEY=... # LeetCode LEETCODE_HANDLE=... # Last.fm Roasting ROAST_CHANNEL_ID=... # Signing SIGNING_SECRET... # Blacklisting and other safety features BLACKLISTED_CHANNEL_IDS=... Here is where you can get the API keys for all the API's used in the bot: Slack API Last.fm First Time Setup Create a Slack App Go to your Slack developer portal and create a new app (from scratch). Enable Socket Mode and generate an App-Level Token with the scope connections:write . Bot Token Scopes Add the following Bot Token Scopes under OAuth & Permissions : chat:write app_mentions:read channels:read , groups:read , im:read , mpim:read channels:history , groups:history , im:history , mpim:history channels:join commands Event Subscriptions Subscribe to: member_joined_channel app_mention Slash Commands Create /yapperLeave in the Slack App settings. Create /yapperleaderboard in the Slack App settings. Create /submit-score in the Slack App settings. Install the Dependencies Run the Bot node index.js File Overview index.js \u2013 Entrypoint for the bot, deals with all the event handling and bot registration events/ joined.js \u2013 Handles welcome messages. leave.js \u2013 Handles leave command. blacklist.js \u2013 Defines blacklisted channel logic. leaderboard.js - Used for finding the leaderboard of messages in the last month. blacklist.js - Blacklists certain actions in channels mention.js - AI responses by Hack Club AI musicRoast.js - Music roasts in specific channels (support by Last.fm API) scoreSubmission.js - From like slash-command for rhythm game score submissions leetcode.js - Updated LeetCode rating every 24 hours docs/ \u2013 Documentation sources for GitHub Pages (MkDocs/Jekyll). Commands & Behaviors Join (Welcome) When a user joins a channel: Hi <@user>, welcome to the land where <@owner> writes shit code This action is compatible with the blacklist feature, meaning that if a channel is in the balcklist channel ids and a user joins the channel, the join message will NOT be triggered. Future plans are to change the <@owner> ping to channel manager Leave (Slash Command) Use /yapperLeave to make Yapper leave: Leaving #<channel name> now. Bye! Change in events/leave.py . Last.fm \u2014 Now Playing Tracker Polls your Last.fm recent track. Posts updates every 15s when the track changes. Posts only in SLACK_CHANNEL_IDS , skips BLACKLISTED_CHANNEL_IDS . Tip: To post privately only to you , replace chat.postMessage with chat.postEphemeral in the code. Only happens when the user (me) is listening to music Roast Posts roast messages in the channel defined by ROAST_CHANNEL_ID . Currently it is a dedicated roast channel in which you can post your Last.fm username for it to roast you. Channel Blacklist Yapper never posts in channels listed in BLACKLISTED_CHANNEL_IDS . Leaderboard You can check the messages leaderboard for the past month by running /yapperleaderboard Change in events/leaderboard.py . Pinging and AI Responses By pinging @Yapper by itself, the bot responds with What the f**k is your problem @<user> , but if you put any text beside the ping. For example @Yapper hi , the bot will generate and display a response using the Hack Club AI Configuration Examples .env Example SLACK_BOT_TOKEN=xoxb-your-token SLACK_APP_TOKEN=xapp-your-token SLACK_USER_ID=U1234567 SLACK_CHANNEL_IDS=C0123ABCD,C0456EFGH BLACKLISTED_CHANNEL_IDS=C0NOPOST1,C0NOPOST2 LASTFM_USER=myuser LASTFM_API_KEY=myapikey LEETCODE_HANDLE=myhandle OSU_ID=123456 OSU_V1_API=osuapikey CLIENT_ID=osuoauthid CLIENT_SECRET=osuoauthsecret ROAST_CHANNEL_ID=C0ROAST Running & Deployment Local pip install -r requirements.txt python main.py Systemd (Server) ~/.config/systemd/user/yapper.service : [Unit] Description=Yapper Slack Bot After=network.target [Service] Environment=PYTHONUNBUFFERED=1 WorkingDirectory=%h/yapper ExecStart=/usr/bin/python3 %h/yapper/main.py Restart=on-failure RestartSec=3 [Install] WantedBy=default.target Enable + start: systemctl --user daemon-reload systemctl --user enable --now yapper Troubleshooting Bot doesn\u2019t post Check SLACK_BOT_TOKEN and SLACK_APP_TOKEN . Ensure bot is invited to the channel. Make sure channel is not blacklisted. Private posts only Use chat.postEphemeral instead of chat.postMessage . Welcome/Leave not firing Verify event subscriptions + /yapperLeave slash command is set up.","title":"Home"},{"location":"#yapper-slack-bot-documentation","text":"","title":"Yapper Slack Bot Documentation"},{"location":"#table-of-contents","text":"Requirements Environment Variables First Time Setup File Overview Commands & Behaviors Configuration Examples Running & Deployment Troubleshooting","title":"Table of Contents"},{"location":"#requirements","text":"The requirements for the Yapper bot are pretty simple: Latest node.js version npm package manager Slack Account, Workspace, and permissions to create bots Git or GitHub Desktop","title":"Requirements"},{"location":"#environment-variables","text":"Since the bot depends on multiple APIs, there are quite a few environment variables to configure. Create a .env file in your project root: # Slack SLACK_BOT_TOKEN=xoxb... SLACK_APP_TOKEN=xapp... SLACK_USER_ID=... SLACK_CHANNEL_IDS=...,... # Last.fm LASTFM_USER=... LASTFM_API_KEY=... # LeetCode LEETCODE_HANDLE=... # Last.fm Roasting ROAST_CHANNEL_ID=... # Signing SIGNING_SECRET... # Blacklisting and other safety features BLACKLISTED_CHANNEL_IDS=... Here is where you can get the API keys for all the API's used in the bot: Slack API Last.fm","title":"Environment Variables"},{"location":"#first-time-setup","text":"Create a Slack App Go to your Slack developer portal and create a new app (from scratch). Enable Socket Mode and generate an App-Level Token with the scope connections:write . Bot Token Scopes Add the following Bot Token Scopes under OAuth & Permissions : chat:write app_mentions:read channels:read , groups:read , im:read , mpim:read channels:history , groups:history , im:history , mpim:history channels:join commands Event Subscriptions Subscribe to: member_joined_channel app_mention Slash Commands Create /yapperLeave in the Slack App settings. Create /yapperleaderboard in the Slack App settings. Create /submit-score in the Slack App settings. Install the Dependencies Run the Bot node index.js","title":"First Time Setup"},{"location":"#file-overview","text":"index.js \u2013 Entrypoint for the bot, deals with all the event handling and bot registration events/ joined.js \u2013 Handles welcome messages. leave.js \u2013 Handles leave command. blacklist.js \u2013 Defines blacklisted channel logic. leaderboard.js - Used for finding the leaderboard of messages in the last month. blacklist.js - Blacklists certain actions in channels mention.js - AI responses by Hack Club AI musicRoast.js - Music roasts in specific channels (support by Last.fm API) scoreSubmission.js - From like slash-command for rhythm game score submissions leetcode.js - Updated LeetCode rating every 24 hours docs/ \u2013 Documentation sources for GitHub Pages (MkDocs/Jekyll).","title":"File Overview"},{"location":"#commands-behaviors","text":"","title":"Commands &amp; Behaviors"},{"location":"#join-welcome","text":"When a user joins a channel: Hi <@user>, welcome to the land where <@owner> writes shit code This action is compatible with the blacklist feature, meaning that if a channel is in the balcklist channel ids and a user joins the channel, the join message will NOT be triggered. Future plans are to change the <@owner> ping to channel manager","title":"Join (Welcome)"},{"location":"#leave-slash-command","text":"Use /yapperLeave to make Yapper leave: Leaving #<channel name> now. Bye! Change in events/leave.py .","title":"Leave (Slash Command)"},{"location":"#lastfm-now-playing-tracker","text":"Polls your Last.fm recent track. Posts updates every 15s when the track changes. Posts only in SLACK_CHANNEL_IDS , skips BLACKLISTED_CHANNEL_IDS . Tip: To post privately only to you , replace chat.postMessage with chat.postEphemeral in the code. Only happens when the user (me) is listening to music","title":"Last.fm \u2014 Now Playing Tracker"},{"location":"#roast","text":"Posts roast messages in the channel defined by ROAST_CHANNEL_ID . Currently it is a dedicated roast channel in which you can post your Last.fm username for it to roast you.","title":"Roast"},{"location":"#channel-blacklist","text":"Yapper never posts in channels listed in BLACKLISTED_CHANNEL_IDS .","title":"Channel Blacklist"},{"location":"#leaderboard","text":"You can check the messages leaderboard for the past month by running /yapperleaderboard Change in events/leaderboard.py .","title":"Leaderboard"},{"location":"#pinging-and-ai-responses","text":"By pinging @Yapper by itself, the bot responds with What the f**k is your problem @<user> , but if you put any text beside the ping. For example @Yapper hi , the bot will generate and display a response using the Hack Club AI","title":"Pinging and AI Responses"},{"location":"#configuration-examples","text":"","title":"Configuration Examples"},{"location":"#env-example","text":"SLACK_BOT_TOKEN=xoxb-your-token SLACK_APP_TOKEN=xapp-your-token SLACK_USER_ID=U1234567 SLACK_CHANNEL_IDS=C0123ABCD,C0456EFGH BLACKLISTED_CHANNEL_IDS=C0NOPOST1,C0NOPOST2 LASTFM_USER=myuser LASTFM_API_KEY=myapikey LEETCODE_HANDLE=myhandle OSU_ID=123456 OSU_V1_API=osuapikey CLIENT_ID=osuoauthid CLIENT_SECRET=osuoauthsecret ROAST_CHANNEL_ID=C0ROAST","title":".env Example"},{"location":"#running-deployment","text":"","title":"Running &amp; Deployment"},{"location":"#local","text":"pip install -r requirements.txt python main.py","title":"Local"},{"location":"#systemd-server","text":"~/.config/systemd/user/yapper.service : [Unit] Description=Yapper Slack Bot After=network.target [Service] Environment=PYTHONUNBUFFERED=1 WorkingDirectory=%h/yapper ExecStart=/usr/bin/python3 %h/yapper/main.py Restart=on-failure RestartSec=3 [Install] WantedBy=default.target Enable + start: systemctl --user daemon-reload systemctl --user enable --now yapper","title":"Systemd (Server)"},{"location":"#troubleshooting","text":"Bot doesn\u2019t post Check SLACK_BOT_TOKEN and SLACK_APP_TOKEN . Ensure bot is invited to the channel. Make sure channel is not blacklisted. Private posts only Use chat.postEphemeral instead of chat.postMessage . Welcome/Leave not firing Verify event subscriptions + /yapperLeave slash command is set up.","title":"Troubleshooting"},{"location":"about/","text":"About the Yapper Slack Bot The reason I started developing Yapper was due to my personal channel (a channel made and managed by you) in the Hack Club Slack being kind of dead. I was inspired by another Hack Clubbers bot names Zeon that tracks everything from Crypto transactions to daily logs. It was basically their own companion bot that made the server more alive. I wanted my bot to have 1 main function: Track literally everything I do and display to everyone in my slack channel. A little invasive? Yes. But also very hilarious","title":"About"},{"location":"about/#about-the-yapper-slack-bot","text":"The reason I started developing Yapper was due to my personal channel (a channel made and managed by you) in the Hack Club Slack being kind of dead. I was inspired by another Hack Clubbers bot names Zeon that tracks everything from Crypto transactions to daily logs. It was basically their own companion bot that made the server more alive. I wanted my bot to have 1 main function: Track literally everything I do and display to everyone in my slack channel. A little invasive? Yes. But also very hilarious","title":"About the Yapper Slack Bot"},{"location":"code_of_conduct/","text":"","title":"Code of Conduct"},{"location":"contribute/","text":"","title":"Contribute"}]}